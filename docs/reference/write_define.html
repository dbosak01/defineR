<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Creates a define XML document — write_define • defineR</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Creates a define XML document — write_define" />
<meta property="og:description" content="The write_define function inputs an SDTM or ADAM
metadata file and outputs a define.xml and associated files to a specified
directory. Possible associated files are the HTML transformation of
the define.xml and a check report. By default, the check report will
also be shown in the viewer." />
<meta property="og:image" content="https://defineR.r-sassy.org/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">defineR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/defineR.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href=".././articles/defineR-faq.html">FAQ</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Creates a define XML document</h1>
    
    <div class="hidden name"><code>write_define.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>write_define</code> function inputs an SDTM or ADAM
metadata file and outputs a define.xml and associated files to a specified
directory. Possible associated files are the HTML transformation of
the define.xml and a check report. By default, the check report will
also be shown in the viewer.</p>
    </div>

    <pre class="usage"><span><span class='fu'>write_define</span><span class='op'>(</span></span>
<span>  <span class='va'>path</span>,</span>
<span>  dir <span class='op'>=</span> <span class='st'>"."</span>,</span>
<span>  type <span class='op'>=</span> <span class='st'>"sdtm"</span>,</span>
<span>  ver <span class='op'>=</span> <span class='cn'>NULL</span>,</span>
<span>  check <span class='op'>=</span> <span class='cn'>TRUE</span>,</span>
<span>  html <span class='op'>=</span> <span class='cn'>TRUE</span>,</span>
<span>  view <span class='op'>=</span> <span class='cn'>TRUE</span>,</span>
<span>  report_type <span class='op'>=</span> <span class='st'>"PDF"</span>,</span>
<span>  end_char <span class='op'>=</span> <span class='st'>""</span></span>
<span><span class='op'>)</span></span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>path</th>
      <td><p>The path to the metadata file.  Currently only Excel metadata
files are supported.  Other metadata sources may be added if there is sufficient
interest.</p></td>
    </tr>
    <tr>
      <th>dir</th>
      <td><p>The output directory to create the define.xml and associated files.
By default, the current working directory will be used. If the directory
does not exist, the function will attempt to create it.</p></td>
    </tr>
    <tr>
      <th>type</th>
      <td><p>The type of define.xml to create.  Valid values are
"sdtm" and "adam".  Default is "sdtm".</p></td>
    </tr>
    <tr>
      <th>ver</th>
      <td><p>The version of the define XML to produce. Currently only
version "2.0.0" is supported.</p></td>
    </tr>
    <tr>
      <th>check</th>
      <td><p>Whether or not to perform consistency checks.  If so,
a check report will be produced in the output directory. Valid values
are TRUE and FALSE.  Default is TRUE.</p></td>
    </tr>
    <tr>
      <th>html</th>
      <td><p>Whether or not to produce the HTML output associated with the
define.xml.  Valid values are TRUE and FALSE.  Default is TRUE.</p></td>
    </tr>
    <tr>
      <th>view</th>
      <td><p>Whether or not to show the check report in the viewer.  Valid
values are TRUE and FALSE.  Default is TRUE.</p></td>
    </tr>
    <tr>
      <th>report_type</th>
      <td><p>The output type of the check report, if requested.
Valid values are "TXT", "RTF", "PDF", "HTML" and "DOCX".  Default is
"PDF".</p></td>
    </tr>
    <tr>
      <th>end_char</th>
      <td><p>The end character to use on computational method blocks.
These blocks often contain code samples that include line feeds or other
line ending characters.  This parameter can be used to control how
these characters are emitted to the XML parser.  Default is an empty
string ("").  If the line feeds in your computational methods are not working,
trying using a return ("\r") or new line ("\n").</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The define.xml file and any associated files will be written
to the directory specified on the <code>dir</code> parameter.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The define.xml document is used by the FDA (and others) to review
study data. All datasets used in the study are listed, along with
variable and value metadata, where clauses, and more.  The define.xml
can be used along with an XSLT style sheet to transform the XML into
an HTML report.  This HTML report has links that allow you to easily
navigate the data structures.</p>
<p>The <code>write_define</code> function
creates both the define XML and the define HTML. The <code>path</code>
parameter identifies the location of the Excel metadata, and the
<code>dir</code> parameter specifies an output directory.  You can create
both SDTM and ADAM metadata by passing the appropriate value on the
<code>type</code> parameter.</p>
<p>Importantly, the function also produces a check report.  This report
will compare the define.xml file against the XSD schema supplied by
CDISC.  Any discrepancies will be written to the check report.  By default,
the check report is also shown in the viewer, and returned as a vector of
strings by the function.  This discrepancy list allows you to verify
that the metadata has been filled out correctly.</p>
<p>For instance, the
conformance check will ensure that each object ID (OID) is unique within
the document.  Any non-unique IDs will be identified and written to the
check report. The check report may therefore be used iteratively to
fix the metadata.</p>
<p>Any errors that prevent proper functioning of the procedure will stop
execution, and be displayed in the console.  All other errors and
warnings will be sent to the check report, and will not stop execution.</p>
<p>Note that the <code>check</code> parameter can be used to turn off the
conformance check mechanism, and just create the XML.</p>
<p>The XSD schema and XSLT transformation documents were created by CDISC,
and are included in the <strong>defineR</strong> package for convenience. To
specify another version of the documents, use the options "defineR.xsd"
and "defineR.xslt".  For example:
<code>options("defineR.xsd" = "c:/myproject/define2-1-0.xsd")</code>.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='write_metadata.html'>write_metadata</a></code> to create a metadata template.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span><span class='co'># Get temp directory</span></span>
<span><span class='va'>tmp</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># Create demo metadata</span></span>
<span><span class='va'>pth</span> <span class='op'>&lt;-</span> <span class='fu'><a href='write_metadata.html'>write_metadata</a></span><span class='op'>(</span><span class='va'>tmp</span>, demo <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># Generate define files</span></span>
<span><span class='va'>res</span> <span class='op'>&lt;-</span> <span class='fu'>write_define</span><span class='op'>(</span><span class='va'>pth</span>, <span class='va'>tmp</span><span class='op'>)</span></span>
<span></span>
<span><span class='co'># View check results</span></span>
<span><span class='va'>res</span></span>
<span><span class='co'># NULL</span></span>
<span></span>
<span><span class='co'># View XML</span></span>
<span><span class='co'># file.show(file.path(tmp, "define.sdtm.xml"))</span></span>
<span></span>
<span><span class='co'># View check report</span></span>
<span><span class='co'># file.show(file.path(tmp, "check.sdtm.pdf"))</span></span>
<span></span>
<span><span class='co'># View HTML</span></span>
<span><span class='co'># file.show(file.path(tmp, "define.sdtm.html"))</span></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by David Bosak, Aheer Alvi.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


